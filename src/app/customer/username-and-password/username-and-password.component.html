<div class="container">
    <h2>Update Login Details</h2>
    <form #updateForm="ngForm" (ngSubmit)="updateLoginDetails()">
      <div class="form-group">
        <label for="username">Username</label>
        <input type="text" class="form-control" id="username" name="username" [(ngModel)]="updatedUser.userName" #usernameInput="ngModel" required pattern="^[a-zA-Z0-9_]+$">
        <div *ngIf="usernameInput.invalid && (usernameInput.dirty || usernameInput.touched)">
          <div *ngIf="usernameInput.errors?.['required']">Username is required.</div>
          <div *ngIf="usernameInput.errors?.['pattern']">Please enter a valid username (alphanumeric and underscore only).</div>
        </div>
      </div>
      <div class="form-group">
        <label for="newEmail">New Email</label>
        <input type="email" class="form-control" id="newEmail" name="newEmail" [(ngModel)]="updatedUser.newEmail" #newEmailInput="ngModel" required email>
        <!-- Add ngIf to check if the email is valid -->
        <div *ngIf="newEmailInput.invalid && (newEmailInput.dirty || newEmailInput.touched)">
          <div *ngIf="newEmailInput.errors?.['required']">Email is required.</div>
          <div *ngIf="newEmailInput.errors?.['email']">Please enter a valid email address.</div>
        </div>
      </div>
      <div class="form-group">
        <label for="currentPassword">Current Password</label>
        <input type="password" class="form-control" id="currentPassword" name="currentPassword" [(ngModel)]="updatedUser.currentPassword" #currentPasswordInput="ngModel" required minlength="6">
        <div *ngIf="currentPasswordInput.invalid && (currentPasswordInput.dirty || currentPasswordInput.touched)">
          <div *ngIf="currentPasswordInput.errors?.['required']">Current Password is required.</div>
          <div *ngIf="currentPasswordInput.errors?.['minlength']">Current Password must be at least 6 characters long.</div>
        </div>
      </div>
      <div class="form-group">
        <label for="newPassword">New Password</label>
        <input type="password" class="form-control" id="newPassword" name="newPassword" [(ngModel)]="updatedUser.newPassword" #newPasswordInput="ngModel" required pattern="^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[^A-Za-z0-9]).{8,100}$">
        <!-- Add ngIf to check if the password is valid -->
        <div *ngIf="newPasswordInput.invalid && (newPasswordInput.dirty || newPasswordInput.touched)">
          <div *ngIf="newPasswordInput.errors?.['required']">Password is required.</div>
          <div *ngIf="newPasswordInput.errors?.['pattern']">
            Password must consist of the following:
            <ul>
              <li>1 uppercase letter</li>
              <li>1 lowercase letter</li>
              <li>1 non-alphanumeric character</li>
              <li>1 digit</li>
              <li>Password must be 8 - 100 characters in length</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="form-group">
        <label for="confirmPassword">Confirm Password</label>
        <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" [(ngModel)]="updatedUser.confirmPassword" #confirmPasswordInput="ngModel" required>
        <div *ngIf="confirmPasswordInput.invalid && (confirmPasswordInput.dirty || confirmPasswordInput.touched)">
          <div *ngIf="confirmPasswordInput.errors?.['required']">Confirm Password is required.</div>
        </div>
      </div>
      <button type="submit" class="btn btn-primary">Update Details</button>
    </form>
  </div>
  