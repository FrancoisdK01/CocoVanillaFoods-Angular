<br>
<br>
<div class="container">
  <h2>Complete System Audit Log</h2>

  <!-- Add a single search input field -->
  <div class="row">
    <div class="col-md-8">
      <input
        type="text"
        class="form-control"
        placeholder="Search"
        [(ngModel)]="searchInput"
        (ngModelChange)="filterAuditTrails()"
      />
    </div>
    <!-- <div class="col-md-2">
      <button class="btn btn-primary" (click)="search()">Search</button>
    </div> -->
  </div>

  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col" class="header-cell sortable" (click)="sortTable('buttonPressed')">Button Pressed
          <span *ngIf="sortBy === 'buttonPressed'" class="sort-icon">
            {{ sortDirection === 'asc' ? '↑' : '↓' }}
          </span>
        </th>
        <th scope="col" class="header-cell sortable" (click)="sortTable('userName')">Username
          <span *ngIf="sortBy === 'userName'" class="sort-icon">
            {{ sortDirection === 'asc' ? '↑' : '↓' }}
          </span>
        </th>
        <th scope="col" class="header-cell sortable" (click)="sortTable('userEmail')">User Email
          <span *ngIf="sortBy === 'userEmail'" class="sort-icon">
            {{ sortDirection === 'asc' ? '↑' : '↓' }}
          </span>
        </th>
        <th scope="col" class="header-cell sortable" (click)="sortTable('transactionDate')">Transaction Date
          <span *ngIf="sortBy === 'transactionDate'" class="sort-icon">
            {{ sortDirection === 'asc' ? '↑' : '↓' }}
          </span>
        </th>
        <th scope="col" class="header-cell sortable" (click)="sortTable('quantity')">Quantity
          <span *ngIf="sortBy === 'quantity'" class="sort-icon">
            {{ sortDirection === 'asc' ? '↑' : '↓' }}
          </span>
        </th>
      </tr>
    </thead>   


    <tbody>
      <tr *ngFor="let x of paginatedAuditTrails"> 
        <td>{{ x.buttonPressed }}</td>
        <td>{{ x.userName }}</td>
        <td>{{ x.userEmail }}</td>
        <td>{{ x.transactionDate | date:'dd/MM/yyyy HH:mm' }}</td>
        <td>
          <ng-container *ngIf="x.quantity; else na">
            {{ x.quantity }}
          </ng-container>
          <ng-template #na>NA</ng-template>
        </td>
      </tr>
    </tbody>

    
  </table>

  <div class="text-center" *ngIf="AuditTrail.length === 0">
    <h3>Nothing in System Audit Log.</h3>
  </div>
</div>



<!-- //=================================== Pagination =======================================================// -->
<div class="pagination">
  <button class="btn btn-light" (click)="previousPage()">
    &laquo; Previous
  </button>
  <span class="page-info">Page {{ currentPage }} of {{ totalPages }}</span>
  <button class="btn btn-light" (click)="nextPage()">
    Next &raquo;
  </button>
</div>

<div class="page-size-container">
  <span class="page-size-label">Page Size:</span>
  <select class="page-size-dropdown" [(ngModel)]="pageSize" (ngModelChange)="onPageSizeChange()">
    <option value="3">3</option>
    <option value="5">5</option>
    <option value="10">10</option>
    <option value="15">15</option>
    <option value="25">25</option>
  </select>
</div>
<!-- //=================================== Pagination =======================================================// -->
